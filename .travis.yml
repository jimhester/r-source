language: c # or other C/C++ variants

addons:
  apt:
    sources:
      - r-packages-precise
    packages:
      - git-svn
      # from rocker depends
      - bash-completion
      - bison
      - debhelper
      - default-jdk
      - g++
      - gcc
      - gdb
      - gfortran
      - groff-base
      - libblas-dev
      - libbz2-dev
      - libcairo2-dev/unstable
      - libcurl4-openssl-dev
      - libjpeg-dev
      - liblapack-dev
      - liblzma-dev
      - libncurses5-dev
      - libpango1.0-dev
      - libpcre3-dev
      - libpng-dev
      - libreadline-dev
      - libtiff5-dev
      - libx11-dev
      - libxt-dev
      - mpack
      - subversion
      - tcl8.6-dev
      - texinfo
      - texlive-base
      - texlive-extra-utils
      - texlive-fonts-extra
      - texlive-fonts-recommended
      - texlive-generic-recommended
      - texlive-latex-base
      - texlive-latex-extra
      - texlive-latex-recommended
      - tk8.6-dev
      - x11proto-core-dev
      - xauth
      - xdg-utils
      - xfonts-base
      - xvfb
      - zlib1g-dev

cache:
  - ccache

script:
  - tools/rsync-recommended
  - git svn init https://svn.r-project.org/R/trunk
  - git update-ref refs/remotes/git-svn refs/remotes/origin/HEAD
  - git svn rebase
  - mkdir build;cd build
  - ../configure
  - make && make check
